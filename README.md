# Frame-Sense

<div align="center">


[![npm](https://img.shields.io/npm/v/@zhangziheng/frame-sense)](https://www.npmjs.com/package/@zhangziheng/frame-sense)
[![Node.js](https://img.shields.io/badge/node-%3E%3D18.0.0-brightgreen)](https://nodejs.org/)
[![TypeScript](https://img.shields.io/badge/typescript-5.7.2-blue)](https://www.typescriptlang.org/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)


ğŸ¯ **æ™ºèƒ½åª’ä½“æ–‡ä»¶é‡å‘½åå·¥å…·** - åŸºäº AI çš„è§†é¢‘å’Œå›¾ç‰‡æ–‡ä»¶è‡ªåŠ¨è¯­ä¹‰åŒ–å‘½å
<br/>
<br/>
<img src="assets/preview.webp" alt="Frame-Sense Hero" width="600" style="border-radius: 12px;" />

</div>


Frame-Sense æ˜¯ä¸€ä¸ªåŸºäº AI çš„æ™ºèƒ½å‘½ä»¤è¡Œå·¥å…·ï¼Œç»“åˆ FFmpeg å’Œ Google Gemini AI æ¨¡å‹ï¼Œè‡ªåŠ¨åˆ†æè§†é¢‘å’Œå›¾ç‰‡å†…å®¹ï¼Œç”Ÿæˆè¯­ä¹‰åŒ–çš„æ–‡ä»¶åã€‚æ”¯æŒæ‰¹é‡å¤„ç†ã€æ··åˆåª’ä½“ç±»å‹å¤„ç†ï¼Œè®©æ–‡ä»¶ç®¡ç†å˜å¾—æ›´åŠ æ™ºèƒ½å’Œé«˜æ•ˆã€‚

## ğŸ“‹ ç›®å½•

- [âœ¨ ä¸»è¦ç‰¹æ€§](#-ä¸»è¦ç‰¹æ€§)
- [ğŸ“¦ å®‰è£…](#-å®‰è£…)
- [ğŸš€ å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [ğŸ”§ å‘½ä»¤è¯¦è§£](#-å‘½ä»¤è¯¦è§£)
- [âš™ï¸ ç³»ç»Ÿè¦æ±‚](#ï¸-ç³»ç»Ÿè¦æ±‚)
- [ğŸš¨ æ³¨æ„äº‹é¡¹](#-æ³¨æ„äº‹é¡¹)
- [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
- [ğŸŒŸ è‡´è°¢](#-è‡´è°¢)

## âœ¨ ä¸»è¦ç‰¹æ€§

- ğŸ¯ **AI è‡ªåŠ¨é‡å‘½å** - åŸºäºå›¾åƒå†…å®¹ç”Ÿæˆè¯­ä¹‰åŒ–æ–‡ä»¶å
- ğŸ“¹ **è§†é¢‘ + å›¾ç‰‡æ”¯æŒ** - è‡ªåŠ¨æå–è§†é¢‘å¸§ï¼Œç»Ÿä¸€å¤„ç†æ‰€æœ‰åª’ä½“æ–‡ä»¶
- âš¡ **æ‰¹é‡å¤„ç†** - ä¸€æ¬¡æ€§å¤„ç†æ•´ä¸ªç›®å½•ï¼Œæ”¯æŒæ··åˆåª’ä½“ç±»å‹
- ğŸ‘€ **é¢„è§ˆæ¨¡å¼** - å…ˆé¢„è§ˆé‡å‘½åç»“æœï¼Œç¡®è®¤æ— è¯¯åå†æ‰§è¡Œ
- ğŸ”§ **è‡ªå®šä¹‰é…ç½®** - æ”¯æŒè‡ªå®šä¹‰ AI æç¤ºè¯ã€æ‰¹æ¬¡å¤§å°ã€æ–‡ä»¶åé•¿åº¦
- ğŸ“ **è¾“å‡ºç›®å½•** - å¯æŒ‡å®šè¾“å‡ºç›®å½•ï¼Œé¿å…è¦†ç›–åŸæ–‡ä»¶
- ğŸ¬ **å¤šç§å¸§æå–ç­–ç•¥** - æ”¯æŒå•å¸§ã€å¤šå¸§ã€å…³é”®å¸§ç­‰ä¸åŒæå–ç­–ç•¥
- ğŸ·ï¸ **æ–‡ä»¶åæ¨¡æ¿** - æ”¯æŒè‡ªå®šä¹‰æ–‡ä»¶åæ¨¡æ¿ï¼ŒåŒ…å«å‰ç¼€ã€æ—¥æœŸæ ¼å¼ç­‰
- ğŸ“… **æ™ºèƒ½æ—¥æœŸæå–** - è‡ªåŠ¨ä» EXIF æ•°æ®æˆ–æ–‡ä»¶ç³»ç»Ÿæå–æ—¥æœŸä¿¡æ¯

## ğŸ“¦ å®‰è£…

### å…¨å±€å®‰è£…
```bash
npm install -g @zhangziheng/frame-sense
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£… FFmpegï¼ˆå¦‚å·²å®‰è£…å¯è·³è¿‡ï¼‰

FFmpeg æ˜¯è§†é¢‘å¤„ç†å¿…éœ€ä¾èµ–ï¼Œè¯·æ ¹æ®æ‚¨çš„ç³»ç»Ÿå®‰è£…ï¼š

#### macOS (ä½¿ç”¨ Homebrew)
```bash
brew install ffmpeg
```

#### Ubuntu/Debian
```bash
sudo apt update
sudo apt install ffmpeg
```

#### Windows (ä½¿ç”¨ Chocolatey)
```bash
choco install ffmpeg
```

#### éªŒè¯å®‰è£…
```bash
ffmpeg -version
```

### 2. é…ç½® API Key
é¦–æ¬¡ä½¿ç”¨éœ€è¦é…ç½® Google Gemini API Keyï¼š

```bash
frame-sense config --api YOUR_GEMINI_API_KEY
```

API æ³¨å†Œåœ°å€ï¼š[Google AI Studio API](https://aistudio.google.com/apikey)

### 2. å¤„ç†å•ä¸ªæ–‡ä»¶
```bash
# åˆ†æè§†é¢‘æ–‡ä»¶
frame-sense video.mp4

# åˆ†æå›¾ç‰‡æ–‡ä»¶
frame-sense image.jpg

# é¢„è§ˆé‡å‘½åç»“æœï¼ˆä¸å®é™…é‡å‘½åï¼‰
frame-sense video.mp4 --preview
```

### 3. æ‰¹é‡å¤„ç†ç›®å½•
```bash
# å¤„ç†ç›®å½•ä¸­çš„æ‰€æœ‰åª’ä½“æ–‡ä»¶ï¼ˆè‡ªåŠ¨è¯†åˆ«ä¸ºç›®å½•ï¼‰
frame-sense /path/to/media/folder

# é¢„è§ˆæ‰¹é‡é‡å‘½åç»“æœ
frame-sense /path/to/media/folder --preview

# æŒ‡å®šè¾“å‡ºç›®å½•
frame-sense /path/to/media/folder --output /path/to/output
```


### ä½¿ç”¨ç¤ºä¾‹

#### åŸºç¡€ä½¿ç”¨
```bash
# åˆ†æå•ä¸ªè§†é¢‘æ–‡ä»¶
frame-sense vacation.mp4

# é¢„è§ˆé‡å‘½åç»“æœ
frame-sense vacation.mp4 --preview

# æ‰¹é‡å¤„ç†ç›®å½•ï¼ˆè‡ªåŠ¨è¯†åˆ«ï¼‰
frame-sense ./photos

# è¾“å‡ºåˆ°æŒ‡å®šç›®å½•
frame-sense ./videos --output ./renamed_videos
```

#### é«˜çº§é…ç½®
```bash
# å¸§æå–ç­–ç•¥
frame-sense video.mp4 --frame-strategy

# è®¾ç½®è‡ªå®šä¹‰æç¤ºæ¨¡æ¿
frame-sense config --custom-prompt "è¯·è¯¦ç»†æè¿°è¿™ä¸ªå›¾åƒçš„ä¸»è¦å†…å®¹ï¼ŒåŒ…æ‹¬äººç‰©ã€åœºæ™¯å’ŒåŠ¨ä½œ"

# è®¾ç½®æ–‡ä»¶åé•¿åº¦é™åˆ¶ä¸º20ä¸ªå­—æ•°
frame-sense config --filename-length 20

# è®¾ç½®æ‰¹å¤„ç†å¤§å°ä¸º10
frame-sense config --batch-size 10

# å¯ç”¨è¯¦ç»†è¾“å‡ºæ¨¡å¼
frame-sense ./media --verbose
```

#### æ–‡ä»¶åæ¨¡æ¿åŠŸèƒ½
```bash
# è‡ªå®šä¹‰å‰ç¼€
frame-sense --template '2025-11_{ai}' ./photos/

# å¹´æœˆæ—¥æœŸæ ¼å¼
frame-sense --template 'YYYY-MM-DD_{ai}' ./photos/

# ä¸­æ–‡æ—¥æœŸæ ¼å¼
frame-sense --template 'YYYYå¹´MMæœˆDDæ—¥_{ai}' ./photos/

# ç›´æ¥ä½¿ç”¨æè¿°
frame-sense --template '{desc}' ./photos/

# é…ç½®é»˜è®¤æ¨¡æ¿
frame-sense config --template 'YYYY-MM_{ai}'

# æŸ¥çœ‹æ¨¡æ¿ç¤ºä¾‹
frame-sense --template-examples
```

#### ç³»ç»Ÿæ£€æŸ¥
```bash
# æ£€æŸ¥ API è¿æ¥
frame-sense --test

# æ£€æŸ¥ç³»ç»Ÿä¾èµ–ï¼ˆFFmpegï¼‰
frame-sense --deps

# æŸ¥çœ‹æ”¯æŒçš„æ ¼å¼
frame-sense --formats

# æŸ¥çœ‹å½“å‰é…ç½®
frame-sense --config
```

## ğŸ”§ å‘½ä»¤è¯¦è§£

### ä¸»å‘½ä»¤
```bash
frame-sense [æ–‡ä»¶è·¯å¾„] [é€‰é¡¹]
```

#### é€‰é¡¹è¯´æ˜
- `-p, --preview` - é¢„è§ˆé‡å‘½åç»“æœï¼Œä¸å®é™…æ‰§è¡Œ
- `-o, --output <dir>` - æŒ‡å®šè¾“å‡ºç›®å½•
- `-b, --batch <size>` - è®¾ç½®æ‰¹é‡å¤„ç†å¤§å°
- `-f, --frame-strategy [strategy]` - è®¾ç½®å¸§æå–ç­–ç•¥ï¼Œä¸å¸¦å€¼æ—¶è¿›å…¥äº¤äº’é€‰æ‹©
- `-v, --verbose` - å¯ç”¨è¯¦ç»†è¾“å‡ºå’Œè°ƒè¯•æ¨¡å¼
- `-t, --test` - æµ‹è¯• AI API è¿æ¥
- `--config` - æ˜¾ç¤ºå½“å‰é…ç½®ä¿¡æ¯
- `--formats` - æ˜¾ç¤ºæ”¯æŒçš„åª’ä½“æ ¼å¼
- `--deps` - æ£€æŸ¥ç³»ç»Ÿä¾èµ–
- `--template <template>` - è‡ªå®šä¹‰æ–‡ä»¶åæ¨¡æ¿ï¼Œæ”¯æŒå˜é‡æ›¿æ¢
- `--date-source <sources>` - æ—¥æœŸæ¥æºä¼˜å…ˆçº§ï¼Œé€—å·åˆ†éš”
- `--template-examples` - æ˜¾ç¤ºæ–‡ä»¶åæ¨¡æ¿ç¤ºä¾‹


### é…ç½®ç®¡ç†
```bash
frame-sense config [é€‰é¡¹]
```

#### é…ç½®é€‰é¡¹
- `--api <key>` - è®¾ç½® Google Gemini API Key
- `--batch-size <size>` - è®¾ç½®é»˜è®¤æ‰¹é‡å¤„ç†å¤§å°
- `--filename-length <length>` - è®¾ç½®æ–‡ä»¶åå­—æ•°é•¿åº¦é™åˆ¶
- `--custom-prompt <template>` - è®¾ç½®è‡ªå®šä¹‰åˆ†ææç¤ºæ¨¡æ¿
- `--template <template>` - è®¾ç½®é»˜è®¤æ–‡ä»¶åæ¨¡æ¿
- `--date-source <sources>` - è®¾ç½®æ—¥æœŸæ¥æºä¼˜å…ˆçº§
- `--reset-prompt` - é‡ç½®æç¤ºæ¨¡æ¿åˆ°é»˜è®¤å€¼
- `--reset` - é‡ç½®æ‰€æœ‰é…ç½®åˆ°é»˜è®¤å€¼
- `--show` - æ˜¾ç¤ºå½“å‰é…ç½®

### æ—¥æœŸæ ¼å¼æ”¯æŒ

| æ ¼å¼ | æè¿° | ç¤ºä¾‹ |
|------|------|------|
| `YYYY-MM-DD` | å®Œæ•´æ—¥æœŸ | `2024-12-25` |
| `YYYY-MM` | å¹´æœˆæ ¼å¼ | `2024-12` |
| `YYYY` | å¹´ä»½ | `2024` |
| `YYYYMMDD` | ç´§å‡‘æ—¥æœŸ | `20241225` |
| `MM-DD` | æœˆæ—¥æ ¼å¼ | `12-25` |
| `YYYYå¹´MMæœˆDDæ—¥` | ä¸­æ–‡æ—¥æœŸ | `2024å¹´12æœˆ25æ—¥` |

### æ¨¡æ¿ç¤ºä¾‹

```bash
# æŸ¥çœ‹æ‰€æœ‰æ¨¡æ¿ç¤ºä¾‹
frame-sense --template-examples

# è‡ªå®šä¹‰å‰ç¼€
frame-sense --template '2025-11_{ai}' ./photos/
# ç»“æœï¼š2025-11_ç¾ä¸½çš„æ—¥è½é£æ™¯.jpg

# æ—¥æœŸ + AI æè¿°
frame-sense --template 'YYYY-MM-DD_{ai}' ./photos/
# ç»“æœï¼š2024-12-25_ç¾ä¸½çš„æ—¥è½é£æ™¯.jpg

# å¹´æœˆ + AI æè¿°
frame-sense --template 'YYYY-MM_{ai}' ./photos/
# ç»“æœï¼š2024-12_ç¾ä¸½çš„æ—¥è½é£æ™¯.jpg

# ä¸­æ–‡æ—¥æœŸæ ¼å¼
frame-sense --template 'YYYYå¹´MMæœˆDDæ—¥_{ai}' ./photos/
# ç»“æœï¼š2024å¹´12æœˆ25æ—¥_ç¾ä¸½çš„æ—¥è½é£æ™¯.jpg

# AI æè¿°åœ¨å‰
frame-sense --template '{ai}_YYYY-MM-DD' ./photos/
# ç»“æœï¼šç¾ä¸½çš„æ—¥è½é£æ™¯_2024-12-25.jpg
```

### æ—¥æœŸæ¥æºä¼˜å…ˆçº§

Frame-Sense æ”¯æŒä»å¤šä¸ªæ¥æºæå–æ—¥æœŸä¿¡æ¯ï¼ŒæŒ‰ä¼˜å…ˆçº§é¡ºåºï¼š

1. **EXIF æ•°æ®**ï¼šä»å›¾ç‰‡çš„ EXIF æ•°æ®ä¸­æå–æ‹æ‘„æ—¥æœŸ
2. **æ–‡ä»¶åˆ›å»ºæ—¶é—´**ï¼šæ–‡ä»¶ç³»ç»Ÿçš„åˆ›å»ºæ—¶é—´
3. **æ–‡ä»¶ä¿®æ”¹æ—¶é—´**ï¼šæ–‡ä»¶ç³»ç»Ÿçš„ä¿®æ”¹æ—¶é—´

```bash
# è®¾ç½®æ—¥æœŸæ¥æºä¼˜å…ˆçº§
frame-sense --template 'YYYY-MM_{ai}' --date-source 'exif,created,modified' ./photos/

# åªä½¿ç”¨ EXIF æ•°æ®
frame-sense --template 'YYYY-MM_{ai}' --date-source 'exif' ./photos/

# åªä½¿ç”¨æ–‡ä»¶åˆ›å»ºæ—¶é—´
frame-sense --template 'YYYY-MM_{ai}' --date-source 'created' ./photos/
```

## âš™ï¸ ç³»ç»Ÿè¦æ±‚

### è¿è¡Œç¯å¢ƒ
- **Node.js**: >= 18.0.0
- **FFmpeg**: ç”¨äºè§†é¢‘å¤„ç†ï¼ˆå¿…éœ€ï¼Œå®‰è£…æ­¥éª¤è§å¿«é€Ÿå¼€å§‹ï¼‰
- **Google Gemini API Key**: ç”¨äº AI åˆ†æ

### ç³»ç»Ÿæ£€æŸ¥
```bash
# æ£€æŸ¥æ‰€æœ‰ä¾èµ–æ˜¯å¦æ­£ç¡®å®‰è£…
frame-sense --deps
```

### å¸§æå–ç­–ç•¥è¯¦è§£

Frame-Sense æä¾›ä¸‰ç§ä¸åŒçš„å¸§æå–ç­–ç•¥ï¼Œé€‚åº”ä¸åŒçš„ä½¿ç”¨åœºæ™¯ï¼š

| ç­–ç•¥ | è¯´æ˜ | é€‚ç”¨åœºæ™¯ | ä¼˜åŠ¿ | æ³¨æ„äº‹é¡¹ |
|------|------|----------|------|----------|
| **single** | æå–ç¬¬10å¸§ä½œä¸ºä»£è¡¨å¸§ | å¿«é€Ÿé¢„è§ˆã€ç®€å•å†…å®¹è§†é¢‘ | å¤„ç†é€Ÿåº¦å¿«ã€èµ„æºå ç”¨å°‘ | å¯èƒ½é”™è¿‡é‡è¦å†…å®¹å˜åŒ– |
| **multiple** | å‡åŒ€æå–5å¸§è¦†ç›–æ•´ä¸ªè§†é¢‘ | ä¸€èˆ¬è§†é¢‘å†…å®¹ã€æ•™ç¨‹è§†é¢‘ | å†…å®¹è¦†ç›–å…¨é¢ã€ç»“æœå¯æ§ | å¤„ç†æ—¶é—´é€‚ä¸­ |
| **keyframes** | æå–æ‰€æœ‰å…³é”®å¸§ï¼ˆåœºæ™¯å˜åŒ–ç‚¹ï¼‰ | å¤æ‚åœºæ™¯ã€åŠ¨ä½œå¯†é›†è§†é¢‘ | æ•è·æ‰€æœ‰é‡è¦åœºæ™¯å˜åŒ– | æå–å¸§æ•°ä¸å¯æ§ã€è€—æ—¶è¾ƒé•¿ |

**é…ç½®å¸§æå–ç­–ç•¥ï¼š**

é€šè¿‡äº¤äº’å¼é€‰æ‹©è®¾ç½®ï¼ˆæ¨èï¼‰ï¼š
```bash
# å¤„ç†è§†é¢‘æ—¶äº¤äº’å¼é€‰æ‹©å¸§æå–ç­–ç•¥
frame-sense video.mp4 --frame-strategy

# æˆ–è€…ç›´æ¥æŒ‡å®šç­–ç•¥
frame-sense video.mp4 --frame-strategy multiple
frame-sense video.mp4 --frame-strategy keyframes
frame-sense video.mp4 --frame-strategy single
```

é€šè¿‡é…ç½®æ–‡ä»¶è®¾ç½®ï¼š
```bash
# æŸ¥çœ‹å½“å‰é…ç½®
frame-sense --config

# æ‰‹åŠ¨ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹ frameExtractionStrategy å­—æ®µï¼š
# ~/.config/frame-sense-nodejs/frame-sense.json
{
  "frameExtractionStrategy": "multiple"  // å¯é€‰ï¼šsingle, multiple, keyframes
}
```

**ç­–ç•¥é€‰æ‹©å»ºè®®ï¼š**
- ğŸ“· **æ—¥å¸¸è§†é¢‘ã€Vlog** â†’ `single`ï¼ˆå¿«é€Ÿå¤„ç†ï¼‰
- ğŸ¬ **ç”µå½±ã€é•¿è§†é¢‘** â†’ `multiple`ï¼ˆå…¨é¢è¦†ç›–ï¼‰
- ğŸ® **æ¸¸æˆå½•åƒã€è¿åŠ¨è§†é¢‘** â†’ `keyframes`ï¼ˆæ•è·åŠ¨ä½œå˜åŒ–ï¼‰
- ğŸ“š **æ•™ç¨‹ã€æ¼”ç¤ºè§†é¢‘** â†’ `multiple`ï¼ˆå¹³è¡¡æ•ˆæœä¸é€Ÿåº¦ï¼‰

### æ··åˆæ‰¹å¤„ç†ä¼˜åŒ–
- **æ™ºèƒ½åˆ†ç»„**: å°†å›¾ç‰‡å’Œè§†é¢‘å¸§æ··åˆåˆ†ç»„ï¼Œæœ€å¤§åŒ– AI API ä½¿ç”¨æ•ˆç‡
- **å¹¶è¡Œå¤„ç†**: æ”¯æŒå¤šæ–‡ä»¶åŒæ—¶å¤„ç†ï¼Œæå‡æ•´ä½“é€Ÿåº¦
- **å†…å­˜ç®¡ç†**: åˆç†ç®¡ç†ä¸´æ—¶æ–‡ä»¶å’Œå†…å­˜ä½¿ç”¨
- **é”™è¯¯æ¢å¤**: å•ä¸ªæ–‡ä»¶å¤±è´¥ä¸å½±å“æ•´ä½“å¤„ç†è¿›ç¨‹

## ğŸš¨ æ³¨æ„äº‹é¡¹

### API ä½¿ç”¨é™åˆ¶
- Google Gemini API æœ‰è°ƒç”¨é¢‘ç‡é™åˆ¶
- å»ºè®®åˆç†è®¾ç½®æ‰¹å¤„ç†å¤§å°ï¼Œé¿å…è¶…å‡ºé™åˆ¶
- å¤§é‡æ–‡ä»¶å¤„ç†æ—¶å»ºè®®åˆ†æ‰¹è¿›è¡Œ

### æ€§èƒ½ä¼˜åŒ–å»ºè®®
- å¯¹äºå¤§é‡æ–‡ä»¶ï¼Œå»ºè®®ä½¿ç”¨ `--batch-size` å‚æ•°è°ƒæ•´æ‰¹å¤„ç†å¤§å°
- è§†é¢‘æ–‡ä»¶å¤„ç†ç›¸å¯¹è¾ƒæ…¢ï¼Œå› ä¸ºéœ€è¦æå–å¸§
- å¯ç”¨ `--verbose` æ¨¡å¼å¯ä»¥æŸ¥çœ‹è¯¦ç»†çš„å¤„ç†ä¿¡æ¯

### æ•°æ®å®‰å…¨
- å›¾åƒæ•°æ®ä¼šå‘é€åˆ° Google Gemini API è¿›è¡Œåˆ†æ
- ä¸ä¼šæ°¸ä¹…å­˜å‚¨ç”¨æˆ·çš„å›¾åƒæ•°æ®



## ğŸŒŸ è‡´è°¢

- [Google Gemini AI](https://ai.google.dev/) - æä¾›å¼ºå¤§çš„å›¾åƒè¯†åˆ«èƒ½åŠ›ï¼ˆä¸»è¦æ˜¯å…è´¹ğŸ˜…ï¼‰
- [FFmpeg](https://ffmpeg.org/) - è§†é¢‘å¤„ç†æ ¸å¿ƒ
- [Sharp](https://sharp.pixelplumbing.com/) - é«˜æ€§èƒ½å›¾åƒå¤„ç†

---

<div align="center">

**è®©æ–‡ä»¶ç®¡ç†å˜å¾—æ›´æ™ºèƒ½** ğŸš€

[GitHub](https://github.com/Shadowzzh/frame-sense) â€¢ [NPM](https://www.npmjs.com/package/@zhangziheng/frame-sense) â€¢ [Issues](https://github.com/Shadowzzh/frame-sense/issues)

</div>